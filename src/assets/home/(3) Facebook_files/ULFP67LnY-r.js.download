;/*FB_PKG_DELIM*/

__d("E2eeStateSerializers",["E2eeStateTypes","ThriftTypes"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(){return{min:0,max:0}}function b(){return{supportedVersions:[]}}function e(){return{employedVersion:0}}function i(){return{mode:0}}function f(){return{preKeyBundle:Uint8Array.of(),identityKeyInfo:i(),deviceId:0}}function j(){return{epochId:"0",isKeyDistributor:!1,epochInfo:k(),keyDistributorId:""}}function k(){return{currentEpochId:"0",lastLeaveEpochId:"0",lastJoinEpochId:"0"}}function l(){return{supportedVersions:[]}}function m(){return{keyNegotiationMode:0,allowOptionalGfd:!1}}function n(){return{keyNegotiationMode:0,removeFrameDecryptorDelayMs:0,keepFrameDecryptors:!1,senderKeyUpdateDelayMs:0,keyTtlMs:0,ratchetSpace:0,keyOverMediaDataChannelNumSends:0,keyOverMediaDataChannelRetryDelayMs:0,enableH264V2:!1,requiredCapabilities:[],disableE2eeAckThroughSignalingChannel:!1,signalingKeyMessageProtocol:d("E2eeStateTypes").SignalingKeyMessageProtocolEnum.cast(0)}}function o(){return{sessionKeyProtocolInfo:j(),populateParticipantHash:!1,enableParticipantVerification:!1}}function p(){return{preKeyBundle:Uint8Array.of(),cipherSuites:[],protocolVersion:l(),config:m(),identityKeyInfo:i(),deviceId:0,e2eeClientStateCapabilities:{},supportedE2eeKeyNegotiationProtocols:[]}}function q(){return{cipherSuites:[],protocolVersion:l(),config:n(),endpointInfos:{},e2eeServerStateCapabilities:{},negotiatedE2eeKeyNegotiationProtocol:d("E2eeStateTypes").E2eeKeyNegotiationProtocolEnum.cast(0),serverInfraMandatedExpStatus:d("E2eeStateTypes").InfraMandatedExpStatus.cast(0),serverP2PSFrameExpStatus:d("E2eeStateTypes").E2eeStateP2PSFrameExpStatus.cast(0)}}function r(a,b){b.writeStructBegin("VersionRange");b.writeFieldBegin({fname:"min",ftype:(h||(h=c("ThriftTypes"))).I16,fid:1});if(a.min!=null)b.writeI16(a.min);else{var d=0;b.writeI16(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"max",ftype:h.I16,fid:2});if(a.max!=null)b.writeI16(a.max);else{d=0;b.writeI16(d)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function s(a,b){b.writeStructBegin("E2eeClientStateCapability");b.writeFieldBegin({fname:"supportedVersions",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:1});if(a.supportedVersions!=null){b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).STRUCT,size:a.supportedVersions.length});for(a of a.supportedVersions)r(a,b);b.writeListEnd()}else{a=[];b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).STRUCT,size:a.length});for(a of a)r(a,b);b.writeListEnd()}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function t(a,b){b.writeStructBegin("E2eeServerStateCapability");b.writeFieldBegin({fname:"employedVersion",ftype:(h||(h=c("ThriftTypes"))).I16,fid:1});if(a.employedVersion!=null)b.writeI16(a.employedVersion);else{a=0;b.writeI16(a)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function u(a,b){b.writeStructBegin("IdentityKeyInfo");b.writeFieldBegin({fname:"mode",ftype:(h||(h=c("ThriftTypes"))).I16,fid:1});if(a.mode!=null)b.writeI16(a.mode);else{a=0;b.writeI16(a)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function v(a,b){b.writeStructBegin("E2eeEndpointInfo");b.writeFieldBegin({fname:"preKeyBundle",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.preKeyBundle!=null)b.writeBinary(a.preKeyBundle);else{var d=Uint8Array.of();b.writeBinary(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"identityKeyInfo",ftype:h.STRUCT,fid:2});if(a.identityKeyInfo!=null)u(a.identityKeyInfo,b);else{d=i();u(d,b)}b.writeFieldEnd();b.writeFieldBegin({fname:"deviceId",ftype:h.I32,fid:3});if(a.deviceId!=null)b.writeI32(a.deviceId);else{d=0;b.writeI32(d)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function w(a,b){b.writeStructBegin("SessionKeyProtocolInfo");b.writeFieldBegin({fname:"epochId",ftype:(h||(h=c("ThriftTypes"))).I64,fid:1});if(a.epochId!=null)b.writeI64(BigInt(a.epochId));else{var d="0";b.writeI64(BigInt(d))}b.writeFieldEnd();b.writeFieldBegin({fname:"isKeyDistributor",ftype:h.BOOL,fid:2});if(a.isKeyDistributor!=null)b.writeBool(a.isKeyDistributor);else{d=!1;b.writeBool(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"epochInfo",ftype:h.STRUCT,fid:3});if(a.epochInfo!=null)x(a.epochInfo,b);else{d=k();x(d,b)}b.writeFieldEnd();b.writeFieldBegin({fname:"keyDistributorId",ftype:h.STRING,fid:4});if(a.keyDistributorId!=null)b.writeString(a.keyDistributorId);else{d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function x(a,b){b.writeStructBegin("EpochInfo");b.writeFieldBegin({fname:"currentEpochId",ftype:(h||(h=c("ThriftTypes"))).I64,fid:1});if(a.currentEpochId!=null)b.writeI64(BigInt(a.currentEpochId));else{var d="0";b.writeI64(BigInt(d))}b.writeFieldEnd();b.writeFieldBegin({fname:"lastLeaveEpochId",ftype:h.I64,fid:2});if(a.lastLeaveEpochId!=null)b.writeI64(BigInt(a.lastLeaveEpochId));else{d="0";b.writeI64(BigInt(d))}b.writeFieldEnd();b.writeFieldBegin({fname:"lastJoinEpochId",ftype:h.I64,fid:3});if(a.lastJoinEpochId!=null)b.writeI64(BigInt(a.lastJoinEpochId));else{d="0";b.writeI64(BigInt(d))}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function y(a,b){b.writeStructBegin("E2eeProtocolVersion");b.writeFieldBegin({fname:"supportedVersions",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:1});if(a.supportedVersions!=null){b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).STRUCT,size:a.supportedVersions.length});for(a of a.supportedVersions)r(a,b);b.writeListEnd()}else{a=[];b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).STRUCT,size:a.length});for(a of a)r(a,b);b.writeListEnd()}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function z(a,b){b.writeStructBegin("E2eeClientStateConfig");b.writeFieldBegin({fname:"keyNegotiationMode",ftype:(h||(h=c("ThriftTypes"))).I16,fid:1});if(a.keyNegotiationMode!=null)b.writeI16(a.keyNegotiationMode);else{var d=0;b.writeI16(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"allowOptionalGfd",ftype:h.BOOL,fid:3});if(a.allowOptionalGfd!=null)b.writeBool(a.allowOptionalGfd);else{d=!1;b.writeBool(d)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function A(a,b){b.writeStructBegin("E2eeServerStateConfig");b.writeFieldBegin({fname:"keyNegotiationMode",ftype:(h||(h=c("ThriftTypes"))).I16,fid:1});if(a.keyNegotiationMode!=null)b.writeI16(a.keyNegotiationMode);else{var e=0;b.writeI16(e)}b.writeFieldEnd();b.writeFieldBegin({fname:"removeFrameDecryptorDelayMs",ftype:h.I32,fid:4});if(a.removeFrameDecryptorDelayMs!=null)b.writeI32(a.removeFrameDecryptorDelayMs);else{e=0;b.writeI32(e)}b.writeFieldEnd();b.writeFieldBegin({fname:"keepFrameDecryptors",ftype:h.BOOL,fid:5});if(a.keepFrameDecryptors!=null)b.writeBool(a.keepFrameDecryptors);else{e=!1;b.writeBool(e)}b.writeFieldEnd();b.writeFieldBegin({fname:"senderKeyUpdateDelayMs",ftype:h.I32,fid:6});if(a.senderKeyUpdateDelayMs!=null)b.writeI32(a.senderKeyUpdateDelayMs);else{e=0;b.writeI32(e)}b.writeFieldEnd();b.writeFieldBegin({fname:"keyTtlMs",ftype:h.I32,fid:7});if(a.keyTtlMs!=null)b.writeI32(a.keyTtlMs);else{e=0;b.writeI32(e)}b.writeFieldEnd();b.writeFieldBegin({fname:"ratchetSpace",ftype:h.I16,fid:8});if(a.ratchetSpace!=null)b.writeI16(a.ratchetSpace);else{e=0;b.writeI16(e)}b.writeFieldEnd();b.writeFieldBegin({fname:"keyOverMediaDataChannelNumSends",ftype:h.I32,fid:9});if(a.keyOverMediaDataChannelNumSends!=null)b.writeI32(a.keyOverMediaDataChannelNumSends);else{e=0;b.writeI32(e)}b.writeFieldEnd();b.writeFieldBegin({fname:"keyOverMediaDataChannelRetryDelayMs",ftype:h.I32,fid:10});if(a.keyOverMediaDataChannelRetryDelayMs!=null)b.writeI32(a.keyOverMediaDataChannelRetryDelayMs);else{e=0;b.writeI32(e)}b.writeFieldEnd();b.writeFieldBegin({fname:"enableH264V2",ftype:h.BOOL,fid:11});if(a.enableH264V2!=null)b.writeBool(a.enableH264V2);else{e=!1;b.writeBool(e)}b.writeFieldEnd();b.writeFieldBegin({fname:"requiredCapabilities",ftype:h.LIST,fid:12});if(a.requiredCapabilities!=null){b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).I32,size:a.requiredCapabilities.length});for(e of a.requiredCapabilities){var f;b.writeI32((f=e)!=null?f:0)}b.writeListEnd()}else{f=[];b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).I32,size:f.length});for(e of f){b.writeI32((f=e)!=null?f:0)}b.writeListEnd()}b.writeFieldEnd();b.writeFieldBegin({fname:"disableE2eeAckThroughSignalingChannel",ftype:h.BOOL,fid:13});if(a.disableE2eeAckThroughSignalingChannel!=null)b.writeBool(a.disableE2eeAckThroughSignalingChannel);else{f=!1;b.writeBool(f)}b.writeFieldEnd();b.writeFieldBegin({fname:"signalingKeyMessageProtocol",ftype:h.I32,fid:14});if(a.signalingKeyMessageProtocol!=null){b.writeI32((e=a.signalingKeyMessageProtocol)!=null?e:0)}else{f=d("E2eeStateTypes").SignalingKeyMessageProtocolEnum.cast(0);b.writeI32((a=f)!=null?a:0)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function B(a,b){b.writeStructBegin("KeyNegotiationProtocolConfig");b.writeFieldBegin({fname:"sessionKeyProtocolInfo",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:1});if(a.sessionKeyProtocolInfo!=null)w(a.sessionKeyProtocolInfo,b);else{var d=j();w(d,b)}b.writeFieldEnd();b.writeFieldBegin({fname:"populateParticipantHash",ftype:h.BOOL,fid:2});if(a.populateParticipantHash!=null)b.writeBool(a.populateParticipantHash);else{d=!1;b.writeBool(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"enableParticipantVerification",ftype:h.BOOL,fid:3});if(a.enableParticipantVerification!=null)b.writeBool(a.enableParticipantVerification);else{d=!1;b.writeBool(d)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function C(a,b){b.writeStructBegin("E2eeClientState");b.writeFieldBegin({fname:"preKeyBundle",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.preKeyBundle!=null)b.writeBinary(a.preKeyBundle);else{var d=Uint8Array.of();b.writeBinary(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"cipherSuites",ftype:h.LIST,fid:2});if(a.cipherSuites!=null){b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).I16,size:a.cipherSuites.length});for(d of a.cipherSuites)b.writeI16(d);b.writeListEnd()}else{d=[];b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).I16,size:d.length});for(d of d)b.writeI16(d);b.writeListEnd()}b.writeFieldEnd();b.writeFieldBegin({fname:"protocolVersion",ftype:h.STRUCT,fid:3});if(a.protocolVersion!=null)y(a.protocolVersion,b);else{d=l();y(d,b)}b.writeFieldEnd();b.writeFieldBegin({fname:"config",ftype:h.STRUCT,fid:4});if(a.config!=null)z(a.config,b);else{d=m();z(d,b)}b.writeFieldEnd();b.writeFieldBegin({fname:"identityKeyInfo",ftype:h.STRUCT,fid:5});if(a.identityKeyInfo!=null)u(a.identityKeyInfo,b);else{d=i();u(d,b)}b.writeFieldEnd();b.writeFieldBegin({fname:"deviceId",ftype:h.I32,fid:6});if(a.deviceId!=null)b.writeI32(a.deviceId);else{d=0;b.writeI32(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"e2eeClientStateCapabilities",ftype:h.MAP,fid:7});if(a.e2eeClientStateCapabilities!=null){b.writeMapBegin({ktype:(h||(h=c("ThriftTypes"))).I32,vtype:h.STRUCT,size:Object.keys(a.e2eeClientStateCapabilities).length});for(d of Object.entries(a.e2eeClientStateCapabilities)){var e=d[0],f=d[1];b.writeI32((e=Number(e))!=null?e:0);s(f,b)}b.writeMapEnd()}else{e={};b.writeMapBegin({ktype:(h||(h=c("ThriftTypes"))).I32,vtype:h.STRUCT,size:Object.keys(e).length});for(f of Object.entries(e)){d=f[0];e=f[1];b.writeI32((d=Number(d))!=null?d:0);s(e,b)}b.writeMapEnd()}b.writeFieldEnd();b.writeFieldBegin({fname:"supportedE2eeKeyNegotiationProtocols",ftype:h.LIST,fid:8});if(a.supportedE2eeKeyNegotiationProtocols!=null){b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).I32,size:a.supportedE2eeKeyNegotiationProtocols.length});for(d of a.supportedE2eeKeyNegotiationProtocols){b.writeI32((e=d)!=null?e:0)}b.writeListEnd()}else{f=[];b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).I32,size:f.length});for(a of f){b.writeI32((e=a)!=null?e:0)}b.writeListEnd()}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function D(a,b){b.writeStructBegin("E2eeServerState");b.writeFieldBegin({fname:"cipherSuites",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:2});if(a.cipherSuites!=null){b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).I16,size:a.cipherSuites.length});for(var e of a.cipherSuites)b.writeI16(e);b.writeListEnd()}else{e=[];b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).I16,size:e.length});for(e of e)b.writeI16(e);b.writeListEnd()}b.writeFieldEnd();b.writeFieldBegin({fname:"protocolVersion",ftype:h.STRUCT,fid:3});if(a.protocolVersion!=null)y(a.protocolVersion,b);else{e=l();y(e,b)}b.writeFieldEnd();b.writeFieldBegin({fname:"config",ftype:h.STRUCT,fid:4});if(a.config!=null)A(a.config,b);else{e=n();A(e,b)}b.writeFieldEnd();b.writeFieldBegin({fname:"endpointInfos",ftype:h.MAP,fid:5});if(a.endpointInfos!=null){b.writeMapBegin({ktype:(h||(h=c("ThriftTypes"))).STRING,vtype:h.STRUCT,size:Object.keys(a.endpointInfos).length});for(e of Object.entries(a.endpointInfos)){var f=e[0],g=e[1];b.writeString(f);v(g,b)}b.writeMapEnd()}else{f={};b.writeMapBegin({ktype:(h||(h=c("ThriftTypes"))).STRING,vtype:h.STRUCT,size:Object.keys(f).length});for(g of Object.entries(f)){e=g[0];f=g[1];b.writeString(e);v(f,b)}b.writeMapEnd()}b.writeFieldEnd();b.writeFieldBegin({fname:"e2eeServerStateCapabilities",ftype:h.MAP,fid:6});if(a.e2eeServerStateCapabilities!=null){b.writeMapBegin({ktype:(h||(h=c("ThriftTypes"))).I32,vtype:h.STRUCT,size:Object.keys(a.e2eeServerStateCapabilities).length});for(e of Object.entries(a.e2eeServerStateCapabilities)){f=e[0];g=e[1];b.writeI32((f=Number(f))!=null?f:0);t(g,b)}b.writeMapEnd()}else{f={};b.writeMapBegin({ktype:(h||(h=c("ThriftTypes"))).I32,vtype:h.STRUCT,size:Object.keys(f).length});for(g of Object.entries(f)){e=g[0];f=g[1];b.writeI32((e=Number(e))!=null?e:0);t(f,b)}b.writeMapEnd()}b.writeFieldEnd();b.writeFieldBegin({fname:"negotiatedE2eeKeyNegotiationProtocol",ftype:h.I32,fid:7});if(a.negotiatedE2eeKeyNegotiationProtocol!=null){b.writeI32((e=a.negotiatedE2eeKeyNegotiationProtocol)!=null?e:0)}else{f=d("E2eeStateTypes").E2eeKeyNegotiationProtocolEnum.cast(0);b.writeI32((g=f)!=null?g:0)}b.writeFieldEnd();a.keyNegotiationProtocolConfig!=null&&(b.writeFieldBegin({fname:"keyNegotiationProtocolConfig",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:8}),B(a.keyNegotiationProtocolConfig,b),b.writeFieldEnd());b.writeFieldBegin({fname:"serverInfraMandatedExpStatus",ftype:h.I32,fid:9});if(a.serverInfraMandatedExpStatus!=null){b.writeI32((e=a.serverInfraMandatedExpStatus)!=null?e:0)}else{f=d("E2eeStateTypes").InfraMandatedExpStatus.cast(0);b.writeI32((g=f)!=null?g:0)}b.writeFieldEnd();b.writeFieldBegin({fname:"serverP2PSFrameExpStatus",ftype:h.I32,fid:10});if(a.serverP2PSFrameExpStatus!=null){b.writeI32((e=a.serverP2PSFrameExpStatus)!=null?e:0)}else{f=d("E2eeStateTypes").E2eeStateP2PSFrameExpStatus.cast(0);b.writeI32((g=f)!=null?g:0)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function E(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).I16?b.min=a.readI16():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).I16?b.max=a.readI16():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.min===void 0&&(b.min=0);b.max===void 0&&(b.max=0);return b}function F(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:if(e===(h||(h=c("ThriftTypes"))).LIST){b.supportedVersions=[];d=a.readListBegin();for(var f=0;f<d.size;f++){var g=E(a);b.supportedVersions.push(g)}}else a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.supportedVersions===void 0&&(b.supportedVersions=[]);return b}function G(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).I16?b.employedVersion=a.readI16():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.employedVersion===void 0&&(b.employedVersion=0);return b}function H(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).I16?b.mode=a.readI16():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.mode===void 0&&(b.mode=0);return b}function I(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.preKeyBundle=a.readBinary():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).STRUCT?b.identityKeyInfo=H(a):a.skip(e);break;case 3:e===(h||(h=c("ThriftTypes"))).I32?b.deviceId=a.readI32():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.preKeyBundle===void 0&&(b.preKeyBundle=Uint8Array.of());b.identityKeyInfo===void 0&&(b.identityKeyInfo=i());b.deviceId===void 0&&(b.deviceId=0);return b}function J(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).I64?b.epochId=a.readI64().toString():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).BOOL?b.isKeyDistributor=a.readBool():a.skip(e);break;case 3:e===(h||(h=c("ThriftTypes"))).STRUCT?b.epochInfo=K(a):a.skip(e);break;case 4:e===(h||(h=c("ThriftTypes"))).STRING?b.keyDistributorId=a.readString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.epochId===void 0&&(b.epochId="0");b.isKeyDistributor===void 0&&(b.isKeyDistributor=!1);b.epochInfo===void 0&&(b.epochInfo=k());b.keyDistributorId===void 0&&(b.keyDistributorId="");return b}function K(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).I64?b.currentEpochId=a.readI64().toString():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).I64?b.lastLeaveEpochId=a.readI64().toString():a.skip(e);break;case 3:e===(h||(h=c("ThriftTypes"))).I64?b.lastJoinEpochId=a.readI64().toString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.currentEpochId===void 0&&(b.currentEpochId="0");b.lastLeaveEpochId===void 0&&(b.lastLeaveEpochId="0");b.lastJoinEpochId===void 0&&(b.lastJoinEpochId="0");return b}function L(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:if(e===(h||(h=c("ThriftTypes"))).LIST){b.supportedVersions=[];d=a.readListBegin();for(var f=0;f<d.size;f++){var g=E(a);b.supportedVersions.push(g)}}else a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.supportedVersions===void 0&&(b.supportedVersions=[]);return b}function M(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).I16?b.keyNegotiationMode=a.readI16():a.skip(e);break;case 3:e===(h||(h=c("ThriftTypes"))).BOOL?b.allowOptionalGfd=a.readBool():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.keyNegotiationMode===void 0&&(b.keyNegotiationMode=0);b.allowOptionalGfd===void 0&&(b.allowOptionalGfd=!1);return b}function N(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).I16?b.keyNegotiationMode=a.readI16():a.skip(f);break;case 4:f===(h||(h=c("ThriftTypes"))).I32?b.removeFrameDecryptorDelayMs=a.readI32():a.skip(f);break;case 5:f===(h||(h=c("ThriftTypes"))).BOOL?b.keepFrameDecryptors=a.readBool():a.skip(f);break;case 6:f===(h||(h=c("ThriftTypes"))).I32?b.senderKeyUpdateDelayMs=a.readI32():a.skip(f);break;case 7:f===(h||(h=c("ThriftTypes"))).I32?b.keyTtlMs=a.readI32():a.skip(f);break;case 8:f===(h||(h=c("ThriftTypes"))).I16?b.ratchetSpace=a.readI16():a.skip(f);break;case 9:f===(h||(h=c("ThriftTypes"))).I32?b.keyOverMediaDataChannelNumSends=a.readI32():a.skip(f);break;case 10:f===(h||(h=c("ThriftTypes"))).I32?b.keyOverMediaDataChannelRetryDelayMs=a.readI32():a.skip(f);break;case 11:f===(h||(h=c("ThriftTypes"))).BOOL?b.enableH264V2=a.readBool():a.skip(f);break;case 12:if(f===(h||(h=c("ThriftTypes"))).LIST){b.requiredCapabilities=[];e=a.readListBegin();for(var g=0;g<e.size;g++){var i=d("E2eeStateTypes").E2eeStateCapabilitiesEnum.cast(a.readI32());b.requiredCapabilities.push(i)}}else a.skip(f);break;case 13:f===(h||(h=c("ThriftTypes"))).BOOL?b.disableE2eeAckThroughSignalingChannel=a.readBool():a.skip(f);break;case 14:f===(h||(h=c("ThriftTypes"))).I32?b.signalingKeyMessageProtocol=d("E2eeStateTypes").SignalingKeyMessageProtocolEnum.cast(a.readI32()):a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.keyNegotiationMode===void 0&&(b.keyNegotiationMode=0);b.removeFrameDecryptorDelayMs===void 0&&(b.removeFrameDecryptorDelayMs=0);b.keepFrameDecryptors===void 0&&(b.keepFrameDecryptors=!1);b.senderKeyUpdateDelayMs===void 0&&(b.senderKeyUpdateDelayMs=0);b.keyTtlMs===void 0&&(b.keyTtlMs=0);b.ratchetSpace===void 0&&(b.ratchetSpace=0);b.keyOverMediaDataChannelNumSends===void 0&&(b.keyOverMediaDataChannelNumSends=0);b.keyOverMediaDataChannelRetryDelayMs===void 0&&(b.keyOverMediaDataChannelRetryDelayMs=0);b.enableH264V2===void 0&&(b.enableH264V2=!1);b.requiredCapabilities===void 0&&(b.requiredCapabilities=[]);b.disableE2eeAckThroughSignalingChannel===void 0&&(b.disableE2eeAckThroughSignalingChannel=!1);b.signalingKeyMessageProtocol===void 0&&(b.signalingKeyMessageProtocol=d("E2eeStateTypes").SignalingKeyMessageProtocolEnum.cast(0));return b}function O(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRUCT?b.sessionKeyProtocolInfo=J(a):a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).BOOL?b.populateParticipantHash=a.readBool():a.skip(e);break;case 3:e===(h||(h=c("ThriftTypes"))).BOOL?b.enableParticipantVerification=a.readBool():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.sessionKeyProtocolInfo===void 0&&(b.sessionKeyProtocolInfo=j());b.populateParticipantHash===void 0&&(b.populateParticipantHash=!1);b.enableParticipantVerification===void 0&&(b.enableParticipantVerification=!1);return b}function P(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).STRING?b.preKeyBundle=a.readBinary():a.skip(f);break;case 2:if(f===(h||(h=c("ThriftTypes"))).LIST){b.cipherSuites=[];e=a.readListBegin();for(var g=0;g<e.size;g++){var j=a.readI16();b.cipherSuites.push(j)}}else a.skip(f);break;case 3:f===(h||(h=c("ThriftTypes"))).STRUCT?b.protocolVersion=L(a):a.skip(f);break;case 4:f===(h||(h=c("ThriftTypes"))).STRUCT?b.config=M(a):a.skip(f);break;case 5:f===(h||(h=c("ThriftTypes"))).STRUCT?b.identityKeyInfo=H(a):a.skip(f);break;case 6:f===(h||(h=c("ThriftTypes"))).I32?b.deviceId=a.readI32():a.skip(f);break;case 7:if(f===(h||(h=c("ThriftTypes"))).MAP){b.e2eeClientStateCapabilities={};j=a.readMapBegin();for(g=0;g<j.size;g++){e=d("E2eeStateTypes").E2eeStateCapabilitiesEnum.cast(a.readI32());var k=F(a);e!=null&&(b.e2eeClientStateCapabilities[e]=k)}}else a.skip(f);break;case 8:if(f===(h||(h=c("ThriftTypes"))).LIST){b.supportedE2eeKeyNegotiationProtocols=[];e=a.readListBegin();for(k=0;k<e.size;k++){g=d("E2eeStateTypes").E2eeKeyNegotiationProtocolEnum.cast(a.readI32());b.supportedE2eeKeyNegotiationProtocols.push(g)}}else a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.preKeyBundle===void 0&&(b.preKeyBundle=Uint8Array.of());b.cipherSuites===void 0&&(b.cipherSuites=[]);b.protocolVersion===void 0&&(b.protocolVersion=l());b.config===void 0&&(b.config=m());b.identityKeyInfo===void 0&&(b.identityKeyInfo=i());b.deviceId===void 0&&(b.deviceId=0);b.e2eeClientStateCapabilities===void 0&&(b.e2eeClientStateCapabilities={});b.supportedE2eeKeyNegotiationProtocols===void 0&&(b.supportedE2eeKeyNegotiationProtocols=[]);return b}function Q(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 2:if(f===(h||(h=c("ThriftTypes"))).LIST){b.cipherSuites=[];e=a.readListBegin();for(var g=0;g<e.size;g++){var i=a.readI16();b.cipherSuites.push(i)}}else a.skip(f);break;case 3:f===(h||(h=c("ThriftTypes"))).STRUCT?b.protocolVersion=L(a):a.skip(f);break;case 4:f===(h||(h=c("ThriftTypes"))).STRUCT?b.config=N(a):a.skip(f);break;case 5:if(f===(h||(h=c("ThriftTypes"))).MAP){b.endpointInfos={};i=a.readMapBegin();for(g=0;g<i.size;g++){e=a.readString();var j=I(a);b.endpointInfos[e]=j}}else a.skip(f);break;case 6:if(f===(h||(h=c("ThriftTypes"))).MAP){b.e2eeServerStateCapabilities={};e=a.readMapBegin();for(j=0;j<e.size;j++){g=d("E2eeStateTypes").E2eeStateCapabilitiesEnum.cast(a.readI32());i=G(a);g!=null&&(b.e2eeServerStateCapabilities[g]=i)}}else a.skip(f);break;case 7:f===(h||(h=c("ThriftTypes"))).I32?b.negotiatedE2eeKeyNegotiationProtocol=d("E2eeStateTypes").E2eeKeyNegotiationProtocolEnum.cast(a.readI32()):a.skip(f);break;case 8:f===(h||(h=c("ThriftTypes"))).STRUCT?b.keyNegotiationProtocolConfig=O(a):a.skip(f);break;case 9:f===(h||(h=c("ThriftTypes"))).I32?b.serverInfraMandatedExpStatus=d("E2eeStateTypes").InfraMandatedExpStatus.cast(a.readI32()):a.skip(f);break;case 10:f===(h||(h=c("ThriftTypes"))).I32?b.serverP2PSFrameExpStatus=d("E2eeStateTypes").E2eeStateP2PSFrameExpStatus.cast(a.readI32()):a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.cipherSuites===void 0&&(b.cipherSuites=[]);b.protocolVersion===void 0&&(b.protocolVersion=l());b.config===void 0&&(b.config=n());b.endpointInfos===void 0&&(b.endpointInfos={});b.e2eeServerStateCapabilities===void 0&&(b.e2eeServerStateCapabilities={});b.negotiatedE2eeKeyNegotiationProtocol===void 0&&(b.negotiatedE2eeKeyNegotiationProtocol=d("E2eeStateTypes").E2eeKeyNegotiationProtocolEnum.cast(0));b.serverInfraMandatedExpStatus===void 0&&(b.serverInfraMandatedExpStatus=d("E2eeStateTypes").InfraMandatedExpStatus.cast(0));b.serverP2PSFrameExpStatus===void 0&&(b.serverP2PSFrameExpStatus=d("E2eeStateTypes").E2eeStateP2PSFrameExpStatus.cast(0));return b}g.VersionRange$DefaultConstructor=a;g.E2eeClientStateCapability$DefaultConstructor=b;g.E2eeServerStateCapability$DefaultConstructor=e;g.IdentityKeyInfo$DefaultConstructor=i;g.E2eeEndpointInfo$DefaultConstructor=f;g.SessionKeyProtocolInfo$DefaultConstructor=j;g.EpochInfo$DefaultConstructor=k;g.E2eeProtocolVersion$DefaultConstructor=l;g.E2eeClientStateConfig$DefaultConstructor=m;g.E2eeServerStateConfig$DefaultConstructor=n;g.KeyNegotiationProtocolConfig$DefaultConstructor=o;g.E2eeClientState$DefaultConstructor=p;g.E2eeServerState$DefaultConstructor=q;g.serializeVersionRange=r;g.serializeE2eeClientStateCapability=s;g.serializeE2eeServerStateCapability=t;g.serializeIdentityKeyInfo=u;g.serializeE2eeEndpointInfo=v;g.serializeSessionKeyProtocolInfo=w;g.serializeEpochInfo=x;g.serializeE2eeProtocolVersion=y;g.serializeE2eeClientStateConfig=z;g.serializeE2eeServerStateConfig=A;g.serializeKeyNegotiationProtocolConfig=B;g.serializeE2eeClientState=C;g.serializeE2eeServerState=D;g.deserializeVersionRange=E;g.deserializeE2eeClientStateCapability=F;g.deserializeE2eeServerStateCapability=G;g.deserializeIdentityKeyInfo=H;g.deserializeE2eeEndpointInfo=I;g.deserializeSessionKeyProtocolInfo=J;g.deserializeEpochInfo=K;g.deserializeE2eeProtocolVersion=L;g.deserializeE2eeClientStateConfig=M;g.deserializeE2eeServerStateConfig=N;g.deserializeKeyNegotiationProtocolConfig=O;g.deserializeE2eeClientState=P;g.deserializeE2eeServerState=Q}),98);
__d("LSInsertRtcCallEvent",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.sequence([function(c){return a[6]?b.forEach(b.filter(b.db.table(245).fetch(),function(a){return a.isProcessed===!0}),function(a){return a["delete"]()}):b.resolve()},function(c){return b.db.table(245).add({pk:void 0,threadId:a[0],eventType:a[1],eventTime:a[2],serverInfoData:a[3],eventActorId:a[4],isVideoCall:a[5],callDuration:a[7],isGroupCall:a[9]})}])},function(a){return b.resolve(c)}])}a.__sproc_name__="LSOmnistoreSettingsInsertRtcCallEventStoredProcedure";a.__tables__=["rtc_call_events"];e.exports=a}),null);